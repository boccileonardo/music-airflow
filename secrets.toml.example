# Streamlit Cloud Secrets Configuration
# Copy this structure to your Streamlit Cloud app settings under "Secrets"
# https://docs.streamlit.io/deploy/streamlit-community-cloud/deploy-your-app/secrets-management

# =============================================================================
# AUTHENTICATION
# =============================================================================
# Uses Google OIDC for authentication. Setup:
# 1. Go to Google Cloud Console: https://console.cloud.google.com/apis/credentials
# 2. Create OAuth 2.0 credentials (Web application type)
# 3. Add authorized redirect URI: https://your-app.streamlit.app/oauth2callback
# 4. Copy client_id and client_secret below
# 5. Generate cookie_secret: python -c "import secrets; print(secrets.token_urlsafe(32))"
# 6. Update EMAIL_TO_USERNAME in src/music_airflow/app/auth.py with authorized emails
[auth]
redirect_uri = "https://your-app.streamlit.app/oauth2callback"
cookie_secret = "generate-a-random-secret-here"
client_id = "your-google-client-id.apps.googleusercontent.com"
client_secret = "your-google-client-secret"
# This is Google's standard OIDC discovery URL - don't change it
server_metadata_url = "https://accounts.google.com/.well-known/openid-configuration"

# =============================================================================
# LASTFM API (Required for data pipeline)
# =============================================================================
# Get API credentials from: https://www.last.fm/api/account/create
api_key = ""
shared_secret = ""

# =============================================================================
# YOUTUBE DATA API (Optional - for playlist export)
# =============================================================================
# Get client credentials from Google Cloud Console: https://console.cloud.google.com/
# 1. Create OAuth 2.0 credentials (Web application type)
# 2. Enable YouTube Data API v3
# 3. Add your Streamlit app URL as a redirect URI
# Users will authenticate through the app UI - no user tokens needed here
YOUTUBE_CLIENT_ID = ""
YOUTUBE_CLIENT_SECRET = ""

# =============================================================================
# SPOTIFY API (Optional - for playlist export)
# =============================================================================
# Get credentials from Spotify Developer Dashboard: https://developer.spotify.com/dashboard
# 1. Create an app and get Client ID/Secret
# 2. Add your Streamlit Cloud URL as a Redirect URI (e.g., https://your-app.streamlit.app/)
# Users will authenticate through the app UI - no user tokens needed here
SPOTIFY_CLIENT_ID = ""
SPOTIFY_CLIENT_SECRET = ""
# Optional: Override the redirect URI (defaults to the app URL)
# SPOTIFY_REDIRECT_URI = "https://your-app.streamlit.app/"

# =============================================================================
# GCP CONFIGURATION (Required)
# =============================================================================
# Project ID (required for Firestore and GCS)
GOOGLE_CLOUD_PROJECT = ""
# Google Cloud Storage for Delta tables (bronze/silver layers)
GCS_BUCKET_URI = "gs://your-bucket-name/data"
# Firestore database ID for gold layer (defaults to project default database if not set)
FIRESTORE_DATABASE_ID = ""

# =============================================================================
# GCP SERVICE ACCOUNT (Required for Streamlit Cloud)
# =============================================================================
# Paste the entire service account JSON content here
# The service account needs these roles:
#   - Firestore User (for token storage and gold layer access)
#   - Storage Object Viewer (for reading Delta tables from GCS)
[gcp_service_account]
type = "service_account"
project_id = ""
private_key_id = ""
private_key = ""
client_email = ""
client_id = ""
auth_uri = "https://accounts.google.com/o/oauth2/auth"
token_uri = "https://oauth2.googleapis.com/token"
auth_provider_x509_cert_url = "https://www.googleapis.com/oauth2/v1/certs"
client_x509_cert_url = ""
